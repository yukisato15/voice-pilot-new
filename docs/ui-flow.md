# UI フロー設計

## 3.1 起動時モーダル（強制）
- **構成**: ステップインジケータ付き 3 ページ (目的と流れ, Zoom 設定, 録音時の注意)。
- **同意チェック**: ヘッドホン装着, スピーカー OFF, ローカル録画 ON, アップロード同意。
- **PDF 生成**: 「同意する」ボタン押下時に氏名/会議 ID/時刻を含めた JSON を Main 経由で Python に送信し、Jinja2 テンプレートから `00_consent.pdf` を生成。生成完了後、同意完了画面に遷移。
- **ガード**: すべてのチェックを満たすまで「同意する」は活性化しない。

## 3.2 準備チェック（Zoom 録音支援）
- **フォルダ検出**: OS ごとの標準 Zoom 録画ディレクトリを初期提案。ユーザーはファイルダイアログで変更可能。
- **チェックリスト**: トグル/チェックボックス形式で完了状態を可視化。全項目が完了すると次画面への遷移が解放。
- **ヘッドホン漏れ診断**
  - Renderer からマイク入力レベルを 5 秒取得。
  - `-40dBFS` 閾値で判定し、NG の場合は警告モーダルを表示。
  - 再テスト/続行の選択肢を提示し、続行の場合は警告ステータスを維持。
- **録画ガイド**: Zoom の録画ボタン位置とホットキーを画像/アニメーションで提示。

## 3.3 進行画面
- **レイアウト**
  - 上部: テーマタイトル + ロール指示 (A/B)。
  - 中央: 6:00 からカウントダウンするタイマー。残り 60 秒で大型カウント表示と視覚的強調。
  - オーバーレイ: 開始 3 秒 / 終了 5 秒の無音指示をフェードイン表示。
  - 右側: ヒントカードボタン。クリックするごとに次のヒントが表示され、使用済み番号を記録。
  - 下部: Zoom 録画フォルダ監視に基づく録画状態インジケータ（録画中, 停止, 変換中など）。
- **タイマー制御**
  - `useSessionTimer` フックでカウントダウン、無音シーケンス、30 分ごとの休憩アラートを実装。
  - インターバル 60 秒の待機画面では BGM トグル（デフォルト OFF）を表示。
- **画面共有想定**: UI は大きめのフォントと高コントラストデザインで画面共有に耐える。

## 3.4 完了・アップロード画面
- **ファイル検出**: 変換完了（サイズ安定）のシグナルを Main から受信し、対象セグメントを表示。
- **命名プレビュー**: `YYYYMMDD_HHMMSS_MeetingID` のディレクトリと個別ファイル命名を UI に表示し、手動修正が必要な場合はダイアログでマッピング。
- **アップロード進捗**: Python ワーカーのキュー進捗を表示し、成功/失敗/再試行中をバッジで表現。
- **レポート提示**: `upload_report.csv` と JSON メタデータをダウンロードまたは Finder/Explorer で開くボタンを提供。
- **エラーハンドリング**: 失敗時は詳細ログへのリンクと再試行ボタン。スキップも可能。

## ナビゲーション
- **段階的進行**: 各セクション完了後のみ次へ進む。上部ステップバーで進捗を示す。
- **セッション再開**: 再起動時は最後の進行状態を `electron-store` または SQLite に保存し、復帰を提案。
- **設定アクセス**: メインウィンドウ右上に設定アイコンを配置し、ffmpeg パスやアップロード先を変更可能。
